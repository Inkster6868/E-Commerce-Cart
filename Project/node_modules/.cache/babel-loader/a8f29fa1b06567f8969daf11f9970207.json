{"ast":null,"code":"import axios from \"axios\";\nconst BASE_URL = 'https://identitytoolkit.googleapis.com/v1/';\nconst API_KEY = 'AIzaSyC-ikjdhleZXWQkjbPQ-NRNlhBl60cMBnM';\nexport const signupWithEmailAndPassword = (details, callback) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`${BASE_URL}accounts:signUp?key=${API_KEY}`, {\n        email: details.email,\n        password: details.password,\n        returnSecureToken: true\n      });\n      dispatch({\n        type: 'SIGNUP',\n        payload: response.data\n      });\n      localStorage.setItem(\"token\", response.data.idToken);\n      return callback(response.data);\n    } catch (error) {\n      return callback({\n        error: true,\n        response: error.response\n      });\n    }\n  };\n};\nexport const loginWithEmailAndPassword = (details, callback) => {\n  return async dispatch => {\n    try {\n      const response = await axios.post(`${BASE_URL}accounts:signInWithPassword?key=${API_KEY}`, {\n        email: details.email,\n        password: details.password,\n        returnSecureToken: true\n      });\n      dispatch({\n        type: 'LOGIN',\n        payload: response.data\n      });\n      localStorage.setItem(\"token\", response.data.idToken);\n      return callback(response.data);\n    } catch (error) {\n      return callback({\n        error: true,\n        response: error.response\n      });\n    }\n  };\n};\nexport const checkIsLoggedIn = callback => {\n  return async dispatch => {\n    try {\n      let token = localStorage.getItem(\"token\");\n      if (!token) {\n        return;\n      }\n      const response = await axios.post(`${BASE_URL}accounts:lookup?key=${API_KEY}`, {\n        idToken: token\n      });\n      dispatch({\n        type: 'LOGIN',\n        payload: {\n          idToken: token,\n          localId: response.data.users[0].localId,\n          ...response.data\n        }\n      });\n      return callback(response.data);\n    } catch (error) {\n      return callback({\n        error: true,\n        response: error.response\n      });\n    }\n  };\n};\nexport const logout = () => {\n  return dispatch => {\n    localStorage.removeItem(\"token\");\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  };\n};","map":{"version":3,"names":["axios","BASE_URL","API_KEY","signupWithEmailAndPassword","details","callback","dispatch","response","post","email","password","returnSecureToken","type","payload","data","localStorage","setItem","idToken","error","loginWithEmailAndPassword","checkIsLoggedIn","token","getItem","localId","users","logout","removeItem"],"sources":["C:/Users/tusha/Desktop/React/ETE/Project/src/actions/auth.js"],"sourcesContent":["import axios from \"axios\"\n\nconst BASE_URL = 'https://identitytoolkit.googleapis.com/v1/'\nconst API_KEY = 'AIzaSyC-ikjdhleZXWQkjbPQ-NRNlhBl60cMBnM'\n\nexport const signupWithEmailAndPassword = (details, callback) => {\n    return async(dispatch) => {\n        try {\n            const response = await axios.post(`${BASE_URL}accounts:signUp?key=${API_KEY}`, {\n                email: details.email,\n                password: details.password,\n                returnSecureToken: true\n            })\n            dispatch({\n                type: 'SIGNUP',\n                payload: response.data\n            })\n            localStorage.setItem(\"token\", response.data.idToken)\n            return callback(response.data)\n        }\n        catch (error) {\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\n\nexport const loginWithEmailAndPassword = (details, callback) => {\n    return async(dispatch) => {\n        try {\n            const response = await axios.post(`${BASE_URL}accounts:signInWithPassword?key=${API_KEY}`, {\n                email: details.email,\n                password: details.password,\n                returnSecureToken: true\n            })\n            dispatch({\n                type: 'LOGIN',\n                payload: response.data\n            })\n            localStorage.setItem(\"token\", response.data.idToken)\n            return callback(response.data)\n        }\n        catch (error) {\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\n\nexport const checkIsLoggedIn = callback => {\n    return async(dispatch) => {\n        try {\n            let token = localStorage.getItem(\"token\")\n            if(!token) {\n                return;\n            }\n            const response = await axios.post(`${BASE_URL}accounts:lookup?key=${API_KEY}`, {\n                idToken: token\n            })\n            dispatch({\n                type: 'LOGIN',\n                payload: {\n                    idToken: token,\n                    localId: response.data.users[0].localId,\n                    ...response.data\n                }\n            })\n            return callback(response.data)\n        }\n        catch (error) {\n            return callback({\n                error: true,\n                response: error.response\n            })\n        }\n    }\n}\n\nexport const logout = () => {\n    return dispatch => {\n        localStorage.removeItem(\"token\")\n        dispatch({\n            type: \"LOGOUT\"\n        })\n    }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}